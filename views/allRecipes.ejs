<%- include('partials/header') -%>

<!-- Get all the recipes -->

<section class="border-2 border-green-900 mt-12 p-6">
    <!-- my-4 py-4 grid grid-cols-1 gap-4 auto-rows-fr px-5 md:grid-cols-2 md:px-3 lg:grid-cols-3 -->
    <section class="border-2 border-black grid grid-cols-1 auto-rows-fr md:grid-cols-3 lg:grid-cols-4 h-4/5">
        <section class="border-2 border-yellow-700 col-span-1 bg-white shadow-md py-4 px-7 pb-3 w-340px h-[200px] m-1.5 rounded-md hover:border-2 hover:border-[#FFBB91]">
            <h2><%= user.userName %>, see any recipe you like?</h2>
        </section>
        <section class="border-2 border-indigo-700 col-span-1 md:col-span-2 lg:col-span-3 bg-white shadow-md py-4 px-7 pb-3 w-340px h-[200px] m-1.5 rounded-md hover:border-2 hover:border-[#FFBB91]">
            <div class="border-2 border-black p-3">
                <h2 class="border-2 border-red-700">Second box</h2>
                <input type="search" placeholder="search box" class="border-2 border-orange-700 p-2 m-2">
                    Add an input field to search for external recipes
                </input>
                <span class="block mx-1"><span class="font-bold">Total:</span>
                    Add an input field to search for recipes on app
                </span>
            </div>
        </section>
    </section>

    <!-- WORKING ON DISPLAYING RECIPES -->

    <ul
        class="border-black border-2 bg-[#fafafa] my-2 py-2 grid grid-cols-1 gap-5 auto-rows-fr px-5 md:grid-cols-2 md:px-3 lg:grid-cols-3">
        <% recipes.forEach(recipe=> { %>
            <li class="border-2 my-2 p-1 rounded-md border-black/10 bg-white shadow-sm hover:border-2 hover:border-[#FFBB91]">
                <!-- Modifying recipe card -->
                <div class="flex items-center justify-evenly flex-wrap">
                    <div
                        class="my-2 flex flex-col rounded-md bg-white max-w-1xl min-h-[20rem]  p-3">
    
                        <div class="border-b-2 border-black/30 bg-no-repeat bg-cover min-h-[20rem]">
                            <img src="<%= recipe.image%>" alt="" class="w-96 h-80">
                        </div>
    
                        <div class="flex flex-col pt-0 pb-2">
                            <h1 class="capitalize p-3 text-[#313135] font-bold text-3xl">
                                <%= recipe.title.length > 18 ? recipe.title.slice(0, 18) + '...' : recipe.title%>
                            </h1>
                            <p class="border-black/5 border-2 font-medium text-lg text-[#59595C] p-1 my-3 rounded-xl">
                                <%= recipe.hashtags.length> 2 ? recipe.hashtags.slice(0, 2) + '...' : recipe.hashtags %>
                            </p>
    
                        </div>

                        <div class="p-2 flex justify-between">
                           <div class="bg-[#f7f5f5] p-1.5 rounded-3xl text-sm font-semibold text-[#313135] mb-2">
                                <!-- Display the owner's name -->
                                <% if (recipe.user) { %>
                                    <span>
                                        By: <%= recipe.user.userName %>
                                    </span>
                                <% } else { %>
                                    <span>
                                        Owner information not available.
                                    </span>
                                <% } %>
                           </div>
                           <div class="bg-[#f7f5f5] mb-2 p-1.5 rounded-3xl">
                               <span class="font-semibold">Time: <%= recipe.total %></span>
                           </div>

                        </div>
                        
                        <a href="/recipes/viewRecipe/<%= recipe._id%>"
                            class="my-2 mx-auto justify-self-end no-underline bg-black/5 text-[#515070] rounded text-2xl py-1.5 w-60 text-center
                            hover:rounded-lg hover:shadow-md hover:shadow-black/30 hover:bg-black/5 hover:text-[#FF8E6E]">View
                            Recipe</a>
                    </div>
                </div>
    
                <!-- End of recipe card -->
            </li>
            <% }) %>
    
    </ul>


    <!-- END OF WORKING ON DISPLAYING RECIPES -->



    <!-- links to other pages -->

    <div class="border-blue-400 border-2 flex flex-wrap p-2">
        <!-- work on width. Use the correct syntax -->
        <a href="/dash"
            class="w-44 text-center py-2 px-[20px] bg-black/5 text-[#515070] text-base no-underline capitalize delay-100 tracking-wide m-2 rounded hover:bg-black/5 hover:text-[#FF8E6E] hover:rounded-lg hover:shadow-lg group-hover:shadow-md hover:shadow-black/30">
            <button type="submit">Dashboard</button>
        </a>
        <a href="/comments"
            class="w-44 text-center py-2 px-[20px] bg-black/5 text-[#515070] text-base no-underline capitalize delay-100 tracking-wide m-2 rounded hover:bg-black/5 hover:text-[#FF8E6E] hover:rounded-lg hover:shadow-lg group-hover:shadow-md hover:shadow-black/30">Add Comment
        </a>
    
        <a href="/recipes"
            class="w-44 text-center py-2 px-[20px] bg-black/5 text-[#515070] text-base no-underline capitalize delay-100 tracking-wide m-2 rounded hover:bg-black/5 hover:text-[#FF8E6E] hover:rounded-lg hover:shadow-lg group-hover:shadow-md hover:shadow-black/30">My Recipes
        </a>

        <a href="/recipes/savedRecipes"
            class="w-44 text-center py-2 px-[20px] bg-black/5 text-[#515070] text-base no-underline capitalize delay-100 tracking-wide m-2 rounded hover:bg-black/5 hover:text-[#FF8E6E] hover:rounded-lg hover:shadow-lg group-hover:shadow-md hover:shadow-black/30">Saved recipes
        </a>
    </div>
</section>


<%- include('partials/footer') -%>