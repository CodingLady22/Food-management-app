<%- include('partials/header') -%>

<!-- Get all the recipes -->

<section class="mt-12 p-6">
    <section class="grid grid-cols-1 auto-rows-fr md:grid-cols-3 lg:grid-cols-4 h-4/5">
        <section
            class="col-span-1 bg-white shadow-sm py-4 px-3 pb-3 min-h-[200px] m-1.5 rounded-md">
            
            <div class="relative p-3">
                <h2 class="p-2 mb-2">Hey<span class="font-bold text-lg capitalize">
                        <%= user.userName %>,
                    </span> see any recipe you like?
                </h2>
                
                <div class="absolute left-0 top-[100px] my-5">
                    <a href="#bottom"
                        class="bg-[#f6f6f6] text-[#515070] p-3 rounded shadow-sm shadow-black/20 w-[150px]  text-center hover:shadow-sm hover:text-[#FF8E6E]">Page end
                    </a>
                </div>
            </div>
        </section>

        <section class="col-span-1 md:col-span-2 lg:col-span-3 bg-white py-1 px-7 min-w-[340px] min-h-[200px] m-1.5 shadow">
            
            <section
                class="bg-[f6f6f6] py-2 px-3 flex flex-col justify-center items-center rounded">
                <div class="my-4 mx-0">
                    <div class="flex justify-center p-3">
                        <p class="text-xl text-center">" <%= quotes.quote %> "
                        </p>
                    </div>
                    <div class="flex justify-end italic text-lg p-3">
                        <span class="mx-3"> - </span>
                        <span>
                            <%= quotes.author %>
                        </span>
                    </div>
                </div>
            
            
            </section>
        </section>
        
    </section>

    <!-- DISPLAYING RECIPES -->

    <ul
        class="bg-[#fafafa] my-2 py-2 grid grid-cols-1 gap-5 auto-rows-fr px-5 md:grid-cols-2 md:px-3 lg:grid-cols-3">
        <% recipes.forEach(recipe=> { %>
            <li class="border-2 my-2 p-1 rounded-md border-black/10 bg-white shadow-sm hover:border-2 hover:border-[#FFBB91]">
                <!-- recipe card -->
                <div class="flex items-center justify-evenly flex-wrap">
                    <div
                        class="my-2 flex flex-col rounded-md bg-white max-w-1xl min-h-[20rem]  p-3">
    
                        <div class="border-b-2 border-black/30 bg-no-repeat bg-cover min-h-[20rem]">
                            <img src="<%= recipe.image%>" alt="" class="w-96 h-80">
                        </div>
    
                        <div class="flex flex-col pt-0 pb-2">
                            <h1 class="capitalize p-3 text-[#313135] font-bold text-3xl">
                                <%= recipe.title.length > 18 ? recipe.title.slice(0, 18) + '...' : recipe.title%>
                            </h1>
                            <p class="border-black/5 border-2 font-medium text-lg text-[#59595C] p-1 my-3 rounded-xl overflow-hidden">
                                <% if (recipe.hashtags && recipe.hashtags.length > 0) { %>
                                    <% const hashtagString = recipe.hashtags.join(', '); %>
                                        
                                        <%= hashtagString.length > 30 ? hashtagString.slice(0, 30) + ' ...' : hashtagString %>
                                        
                                <% } %>
                            </p>
    
                        </div>

                        <div class="p-2 flex justify-between">
                           <div class="bg-[#f7f5f5] p-1.5 rounded-3xl text-sm font-semibold text-[#313135] mb-2">
                                <!-- Display the owner's name -->
                                <% if (recipe.user) { %>
                                    <span>
                                        By: <%= recipe.user.userName %>
                                    </span>
                                <% } else { %>
                                    <span>
                                        Owner information not available.
                                    </span>
                                <% } %>
                           </div>
                           <div class="bg-[#f7f5f5] mb-2 p-1.5 rounded-3xl">
                               <span class="font-semibold">Time: <%= recipe.total %></span>
                           </div>

                        </div>
                        
                        <a href="/recipes/viewRecipe/<%= recipe._id%>"
                            class="my-2 mx-auto justify-self-end no-underline bg-black/5 text-[#515070] rounded text-2xl py-1.5 w-60 text-center
                            hover:rounded-lg hover:shadow-md hover:shadow-black/30 hover:bg-black/5 hover:text-[#FF8E6E]">View
                            Recipe</a>
                    </div>
                </div>
    
                <!-- End of recipe card -->
            </li>
            <% }) %>
    
    </ul>


    <!-- END OF DISPLAYING RECIPES -->

    <!-- Same page link to top -->
    <div class="my-7">
        <a href="#top"
            class="bg-[#f6f6f6] text-[#515070] p-3 rounded shadow-sm shadow-black/20 w-[150px] text-center hover:shadow-sm hover:text-[#FF8E6E]">
            Back to top
        </a>
    </div>


    <!-- links to other pages -->

    <div id="bottom" class="flex flex-wrap justify-center p-2">
        
        <a href="/dash"
            class="w-44 text-center py-2 px-[20px] bg-black/5 text-[#515070] text-base no-underline capitalize delay-100 tracking-wide m-2 rounded shadow hover:bg-black/5 hover:text-[#FF8E6E] hover:rounded-lg hover:shadow-lg group-hover:shadow-md hover:shadow-black/30">
            <button type="submit">Dashboard</button>
        </a>
        <a href="/comments"
            class="w-44 text-center py-2 px-[20px] bg-black/5 text-[#515070] text-base no-underline capitalize delay-100 tracking-wide m-2 rounded shadow hover:bg-black/5 hover:text-[#FF8E6E] hover:rounded-lg hover:shadow-lg group-hover:shadow-md hover:shadow-black/30">Add Comment
        </a>
    
        <a href="/recipes"
            class="w-44 text-center py-2 px-[20px] bg-black/5 text-[#515070] text-base no-underline capitalize delay-100 tracking-wide m-2 rounded shadow hover:bg-black/5 hover:text-[#FF8E6E] hover:rounded-lg hover:shadow-lg group-hover:shadow-md hover:shadow-black/30">My Recipes
        </a>

        <a href="/recipes/savedRecipes"
            class="w-44 text-center py-2 px-[20px] bg-black/5 text-[#515070] text-base no-underline capitalize delay-100 tracking-wide m-2 rounded shadow hover:bg-black/5 hover:text-[#FF8E6E] hover:rounded-lg hover:shadow-lg group-hover:shadow-md hover:shadow-black/30">Saved recipes
        </a>
    </div>
</section>

